---
title: "Draft Research pt1"
author: "Tom Kain"
date: "February 20, 2019"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("R/yahoo_api.R")
library(tidyverse)
```

# Position Eligibility
```{r}
get_players(450) -> players

position_columns <- players %>%
  select(starts_with("eligible_positions")) %>%
  colnames()

players %>%
  mutate(positions = paste(!!! syms(position_columns), sep = "," )) %>%
  mutate(positions = gsub('NA', '', positions)) %>%
  mutate(positions = gsub("^,*|(?<=,),|,*$", "", positions, perl=T)) %>%
  select(-(starts_with("eligible_positions"))) %>%
  select(
    player_id:name.last, 
    editorial_team_abbr, 
    position_type, 
    display_position,
    positions
  ) -> players

players %>% saveRDS("data/players_position_eligibility.Rds")

```